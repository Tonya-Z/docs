---
sidebar_position: 5
---

import TabItem from '@theme/TabItem';
import Tabs from '@theme/Tabs';

# 環境から設定を移行する

:::note
Logtoのバージョンが `v1.0.0-beta.11` 以上である場合は、このページをスキップできます。
:::

多くの環境変数を管理することは効率的でも柔軟でもなく、複数のコンテナを実行する場合、単一の真実のソースを保つことが難しいです。

そのため、可能なすべての技術的な構成を、OIDCに関連するキーを含めて、データベースに移動することにしました。

スムーズに行うためには、元の `.env` ファイルを持っているか、次の変数を持つ環境でコマンドを実行してください:

```bash
OIDC_PRIVATE_KEYS=some_secret_key # または OIDC_PRIVATE_KEY_PATHS
OIDC_COOKIE_KEYS=key1,key2
DB_URL=postgresql://localhost:5432/logto
```

その後、次のコマンドを実行します:

<Tabs groupId="cmd">

  <TabItem value="cli" label="CLI">

```bash
logto db seed oidc
# または
logto db seed oidc --env /your/path/to/.env
```

  </TabItem>
  <TabItem value="npx" label="npx">

```bash
npx @logto/cli db seed oidc
# または
npx @logto/cli db seed oidc --env /your/path/to/.env
```

  </TabItem>

</Tabs>

すべてがうまくいけば、次のようなメッセージが表示されます:

```bash
[info] 環境から oidc.privateKeys の設定を読み込みました
[info] 環境から oidc.cookieKeys の設定を読み込みました
[info] oidc.refreshTokenReuseInterval の構成を生成しました
[info] ✔ OIDC構成をシード化しました
```

これで、環境変数から `OIDC_PRIVATE_KEYS` と `OIDC_COOKIE_KEYS` を安全に削除できます。変更が反映されるようにするには、Logtoインスタンスを再起動することを忘れないでください。