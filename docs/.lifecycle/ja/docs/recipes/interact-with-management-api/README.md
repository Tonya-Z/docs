---
sidebar_position: 6
---

# 🚝 管理APIとのやり取り

## Logtoの管理APIとは

Logtoの管理APIは、管理者がアイデンティティ関連のタスクを管理し、セキュリティポリシーを適用し、規制と基準に準拠できるようにするための包括的なAPIコレクションです。

Logtoの管理APIを使用すると、低コード機能を持つ管理コンソールでは実現できない様々なシナリオで利用できる高度にスケーラブルなバックエンドサービスにアクセスできます。

以下は、よく使用されるAPIの一部です：

- ユーザー
- アプリケーション
- ログ
- ロール
- リソース
- コネクタ

利用可能なAPIについて詳しくは、以下のサイトをご覧ください：https://docs.logto.io/api。

Logtoの管理APIで何ができるか気になりますか？Logto管理コンソールではできないが管理APIを使用することで実現できるシナリオのいくつかを紹介します。

## 一般的なシナリオ

当社の管理APIは、さまざまなシナリオで活用できます。たとえば、

### ユーザープロファイルを独自に実装する

現在、Logtoではユーザープロファイルのための事前構築されたUIソリューションを提供していません。ユーザープロファイルはビジネスと製品の属性と密接に関連しており、特にLogtoの観点から事前構築されたソリューションの価値について疑問が生じます。最適な方法を見極める作業を進める間、当社のAPIを使用して独自のソリューションを作成することをお勧めします。たとえば、相互作用API、プロファイルAPI、および検証コードAPIを利用してニーズに合ったカスタムソリューションを開発できます。

詳細については、[ユーザープロファイル](../user-profile/README.md)をご覧ください。

### プログラムでサインインを行う

Logtoのサインイン体験は優れていますが、製品チームがユニークな製品ロジックに適した特定のデザインを持っており、当社が提供するフローを必要としない場合があります。そのような場合、当社の相互作用APIと関連するリソースを使用して独自のサインイン体験を作成できます。

### 高度なユーザー検索

一部のタスクについては、Logtoのコンソールでユーザー管理機能を使用できますが、管理APIはより高度なユーザー検索シナリオをサポートする追加の機能を提供します。詳細については、[高度なユーザー検索](../manage-users/advanced-user-search/)をご覧ください。

当社の開発者は、管理APIを使用して多くの追加機能を実装しています。当社のAPIは高度にスケーラブルであり、幅広いニーズをサポートできると考えています。さらに、いくつかのユースケースを抽出し、それらを低コードプラットフォームに取り込んで生産性を向上させ、開発者のエクスペリエンスを向上させています。

## 方法

1. 管理コンソールでマシン・ツー・マシン用のアプリケーションを作成するためのチュートリアル[最初のアプリケーションの作成と統合](../../tutorials/get-started/create-and-integrate-the-first-app/)に従います。
2. ガイド[マシン・ツー・マシン：Logtoとの認証](../integrate-logto/machine-to-machine.mdx)に従い、API識別子`https://tenantid.logto.app/api`（管理APIを示します）およびスコープ`all`（すべての権限）を使用してアクセストークンを取得します。
3. 取得したアクセストークンを使用してBearer認証で管理APIとやり取りします。

:::note
通常、アクセストークンの有効期限は短くなっています。ローカルキャッシュがある場合は、リクエストを送信する前に必要に応じてアクセストークンを確認して取得することを覚えておいてください。
:::

## ページネーションの使用

一部のAPI応答には多くの結果が含まれる場合があり、結果はページ分割されます。Logtoは2種類のページネーション情報を提供しています。

### リンクヘッダの使用

ページ分割された応答ヘッダは次のようになります：

```
Link: <https://logto.dev/users?page=1&page_size=20>; rel="first"
```

リンクヘッダは、結果の前のページ、次のページ、最初のページ、最後のページのURLを提供します：

- 前のページのURLにはrel="prev"が続きます。
- 次のページのURLにはrel="next"が続きます。
- 最後のページのURLにはrel="last"が続きます。
- 最初のページのURLにはrel="first"が続きます。

### 総数ヘッダの使用

標準のリンクヘッダに加え、Logtoは`Total-Number`ヘッダを追加します：

```
Total-Number: 216
```

それはページ番号を表示するのに非常に便利で役立ちます。

### ページ番号とページサイズの変更

2つのオプションクエリパラメータがあります：

- `page`：ページ番号を示し、1から始まります。デフォルト値は1です。
- `page_size`：ページごとのアイテム数を示し、デフォルト値は20です。