# 権限と役割の管理

:::info
このページは、管理者コンソールを通じて権限と役割を管理するためのものです。RESTful API については [API リファレンス](/api) を参照してください。
:::

## API リソースの権限を管理

:::note
事前定義された Logto Management API は変更できません。続行するには新しい API リソースが必要です。
:::

権限はAPIリソースのレベルで設定されます。"APIリソース"タブに移動し、管理したいAPIリソースをクリックしてから"権限"タブに移動します。

新しい権限を作成するには、右上隅の "権限を作成" ボタンをクリックします。権限を識別し管理しやすくするために、名前と詳細を提供することが重要です。

![権限の管理](./assets/manage-permissions.png)

権限を削除するには、行の右端にあるゴミ箱アイコンをクリックします。

## 役割の管理

### 新しい役割の作成と定義

役割は権限のグループです。"役割"タブに移動すると、定義した役割のリストが表示されます。

新しい役割を作成するには、右上隅の "役割を作成" ボタンをクリックします。ダイアログボックスが表示され、そこで役割に名前と説明を付け、1つ以上の権限を役割に割り当てることができます。

1. 技術的には権限やユーザーを割り当てないで役割を作成することは可能ですが、空の役割を多く作成することはお勧めできません。これにより役割の管理の調和が崩れ、RBACシステムが効果を発揮しなくなります。
2. 権限はAPIごとにグループ化されており、一括で追加するか個別に選択することができます。選択した権限は右側に表示されます。
3. 役割を作成した後、ユーザー割り当てページに移動し、役割を特定のユーザーに承認することができます。名前、メール、電話番号、ユーザー名、または利用可能な場合はIDでユーザーを検索することができます。必要に応じて、このステップをスキップして後でユーザーを役割に割り当てることもできます。

![役割の作成](./assets/create-role.png)

### 役割の表示または更新

役割の作成と割り当てプロセスを完了した後、または役割リストで役割名をクリックした後、役割の詳細ページに移動します。このページのレイアウトとコントロールは他のエンティティと一貫しています。役割を削除するには、3つのドットボタンをクリックします。

いつでも役割名と説明を編集し、役割に割り当てられた権限やユーザーを調査・管理することができます。

:::danger
役割を削除すると、関連する権限が影響を受けるユーザーから削除され、役割、ユーザー、および権限の間の関連が削除されます。
:::

### ユーザーを役割に追加

ユーザーを追加するためには、役割の詳細ページに移動し、"ユーザー"タブをクリックします。次に、"ユーザーを割り当て"をクリックしてダイアログを開きます。

![役割のユーザーを管理](./assets/manage-role-users.png)

希望するユーザーを検索または閲覧し、"ユーザーを割り当て"をクリックして役割に追加します。

### ユーザーを役割から削除

"ユーザー"タブの下で、行の右端にあるゴミ箱アイコンをクリックしてユーザーを削除します。

:::info
特定の役割からユーザーを外すことは、ユーザーベースから削除することはなく、ユーザー自体は存在しますが、その役割に関連する権限へのアクセス権を持たなくなります。
:::

### 役割の権限を管理

役割の機能を変更する必要がある場合、簡単に権限を割り当てたり削除したりすることができます。

- 新しい権限を割り当てるには、"権限"に移動し、"権限を割り当て"をクリックします。そこから役割に追加したい権限を選択することができます。
- 既存の権限を削除するには、行の右端にあるゴミ箱アイコンをクリックします。

:::caution
権限が削除されると、その権限によって付与されていたアクセス権を持つユーザーがその権限のアクセス権を失います。
:::

![役割の権限を管理](./assets/manage-role-permissions.png)

## ユーザーの役割を管理

ユーザーを役割に割り当てたり削除する方法について学びましたが、ユーザーから見て同じ結果を得ることもできます。

ユーザーのアクセス権を変更する必要がある場合は、"ユーザー管理"タブに移動し、該当するユーザー名をクリックします。ユーザー詳細ページの"役割"タブでは、希望する結果を達成するために役割を簡単に割り当てたり削除したりできます。

:::caution
ユーザーから役割を削除すると、そのユーザーはその役割に関連するすべての権限へのアクセス権を失います。役割そのものは存在しますが、それはもはや特定のユーザーにリンクされていません。
:::

![ユーザーの役割を管理](./assets/manage-user-roles.png)